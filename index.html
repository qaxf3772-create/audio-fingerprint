<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Black Pearl - الجوهرة السوداء</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --gold: #c5a059; --dark: #020617; }
        body { background-color: var(--dark); color: #f8fafc; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; }
        
        /* تأثيرات الزجاج والشريط */
        .glass-header { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border-bottom: 1px solid rgba(197, 160, 89, 0.1); }
        .glass-nav { background: rgba(15, 23, 42, 0.4); backdrop-filter: blur(25px); border-top: 1px solid rgba(255, 255, 255, 0.05); }
        
        /* نافذة السحب (Bottom Sheet) */
        .drawer { 
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 85%; 
            background: linear-gradient(to top, #020617 80%, #0f172a 100%);
            border-top: 2px solid var(--gold); border-radius: 3rem 3rem 0 0;
            transition: bottom 0.5s cubic-bezier(0.4, 0, 0.2, 1); z-index: 50; padding: 2rem;
        }
        .drawer.open { bottom: 0; }
        
        /* عناصر الواجهة */
        .gold-btn { background: linear-gradient(135deg, #c5a059 0%, #d4af37 100%); color: black; font-weight: 800; }
        .input-style { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); padding: 1.2rem; border-radius: 1.5rem; width: 100%; outline: none; transition: 0.3s; }
        .input-style:focus { border-color: var(--gold); background: rgba(255,255,255,0.05); }
        .nav-icon { font-size: 1.5rem; transition: 0.3s; color: rgba(255,255,255,0.3); }
        .active-nav { color: var(--gold); transform: translateY(-5px); text-shadow: 0 0 10px rgba(197, 160, 89, 0.5); }
        
        .step-content { display: none; }
        .step-content.active { display: block; animation: slideUp 0.4s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col">

    <header class="p-5 flex justify-between items-center glass-header fixed top-0 w-full z-40">
        <div class="flex items-center gap-3">
            <div class="p-2 gold-btn rounded-lg shadow-2xl"><i class="fas fa-gem"></i></div>
            <span class="text-xl font-black tracking-widest text-[#c5a059] uppercase">Black Pearl</span>
        </div>
        <div id="adminKey" class="text-[10px] text-red-500 font-bold opacity-0 cursor-pointer p-2">خطأ</div>
    </header>

    <main class="flex-1 flex flex-center items-center justify-center p-6 text-center mt-20">
        <div id="mainHero" class="space-y-6">
            <h2 class="text-3xl font-light">مرحباً بك في <span class="gold-text font-bold">الجوهرة</span></h2>
            <p class="text-gray-500 text-sm px-10">ابدأ عملية التوثيق الرقمي وحماية حقوقك الآن</p>
            <button onclick="openDrawer()" class="w-20 h-20 rounded-full gold-btn shadow-[0_0_30px_rgba(197,160,89,0.3)] animate-bounce mt-10">
                <i class="fas fa-plus text-2xl"></i>
            </button>
        </div>

        <div id="adminPanel" class="hidden w-full space-y-8">
            <div class="p-10 rounded-[3rem] border border-gold/20 bg-gold/5">
                <i class="fas fa-crown text-6xl gold-text mb-4"></i>
                <h2 class="text-2xl font-bold">مرحباً بك في الجوهرة السوداء يا مدير</h2>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="p-6 glass-header rounded-3xl"><p class="text-xs text-gray-400">سجل النشاط</p><p class="text-xl font-bold gold-text">نشط</p></div>
                <div class="p-6 glass-header rounded-3xl"><p class="text-xs text-gray-400">التوثيقات</p><p class="text-xl font-bold gold-text">14</p></div>
            </div>
            <button onclick="location.reload()" class="text-gray-600 text-xs">خروج من نظام الجوهرة</button>
        </div>

        <div id="vaultArea" class="hidden w-full space-y-6 overflow-y-auto max-h-[70vh]">
            <h3 class="text-xl font-bold gold-text text-right mb-4">أعمالك الموثقة</h3>
            <div id="vaultContainer" class="space-y-4"></div>
        </div>
    </main>

    <div id="drawer" class="drawer">
        <div class="w-16 h-1 bg-white/10 mx-auto rounded-full mb-8 cursor-pointer" onclick="closeDrawer()"></div>
        
        <div id="s1" class="step-content active space-y-6">
            <h4 class="gold-text font-bold text-xl"><i class="fas fa-file-signature ml-2"></i>معلومات العمل</h4>
            <input type="text" id="wName" placeholder="عنوان العمل (صوت/فيديو/صورة)" class="input-style">
            <input type="text" id="aName" oninput="adminLogic(this.value)" placeholder="اسم الفنان" class="input-style">
            <button onclick="showStep(2)" class="w-full gold-btn py-5 rounded-2xl shadow-xl">متابعة</button>
        </div>

        <div id="s2" class="step-content space-y-6">
            <h4 class="gold-text font-bold text-xl"><i class="fas fa-id-card-alt ml-2"></i>إثبات الهوية</h4>
            <div class="grid grid-cols-2 gap-4">
                <div onclick="alert('تم التقاط السيلفي')" class="bg-white/5 p-8 rounded-3xl border border-dashed border-gold/30 text-center">
                    <i class="fas fa-user-astronaut text-3xl gold-text mb-2"></i><p class="text-[10px]">سيلفي</p>
                </div>
                <div onclick="alert('تم مسح الهوية')" class="bg-white/5 p-8 rounded-3xl border border-dashed border-gold/30 text-center">
                    <i class="fas fa-address-card text-3xl gold-text mb-2"></i><p class="text-[10px]">البطاقة</p>
                </div>
            </div>
            <input type="number" id="idVal" placeholder="رقم الهوية الوطنية" class="input-style">
            <button onclick="showStep(3)" class="w-full gold-btn py-5 rounded-2xl">متابعة</button>
        </div>

        <div id="s3" class="step-content space-y-6 text-center">
            <h4 class="gold-text font-bold text-xl"><i class="fas fa-fingerprint ml-2"></i>الخطوة الأخيرة</h4>
            <div onclick="recVoice()" id="vBtn" class="w-24 h-24 mx-auto rounded-full border-4 border-red-500/20 flex items-center justify-center cursor-pointer transition-all">
                <i class="fas fa-microphone text-3xl text-red-500"></i>
            </div>
            <p class="text-xs text-gray-500">سجل 5 ثوانٍ بصوتك: "أنا صاحب هذا العمل"</p>
            <div onclick="document.getElementById('fileUp').click()" class="border-2 border-dashed border-gold/20 p-10 rounded-[2.5rem] bg-white/5">
                <i class="fas fa-upload text-3xl gold-text mb-3"></i>
                <p class="text-sm">اختر الملف لبدء التوثيق</p>
                <input type="file" id="fileUp" class="hidden" onchange="completeDoc()">
            </div>
        </div>
    </div>

    <nav class="fixed bottom-0 w-full glass-nav p-5 pb-10 flex justify-around items-center z-50 rounded-t-[2.5rem]">
        <button onclick="tab('home')" id="hTab" class="nav-icon active-nav"><i class="fas fa-home"></i></button>
        <button onclick="tab('vault')" id="vTab" class="nav-icon"><i class="fas fa-layer-group"></i></button>
        <button onclick="alert('يتم توليد الشهادة بعد الرفع')" class="nav-icon"><i class="fas fa-award"></i></button>
    </nav>

    <script>
        let aTimer;
        function adminLogic(v) {
            clearTimeout(aTimer);
            const key = document.getElementById('adminKey');
            key.style.opacity = "0";
            if (v.trim() === 'y99r885139rrys') {
                aTimer = setTimeout(() => {
                    key.style.opacity = "1";
                    key.onclick = () => {
                        document.getElementById('mainHero').classList.add('hidden');
                        document.getElementById('adminPanel').classList.remove('hidden');
                        closeDrawer();
                        key.style.opacity = "0";
                    };
                }, 5000);
            }
        }

        function openDrawer() { document.getElementById('drawer').classList.add('open'); }
        function closeDrawer() { document.getElementById('drawer').classList.remove('open'); }
        function showStep(n) {
            document.querySelectorAll('.step-content').forEach(s => s.classList.remove('active'));
            document.getElementById('s' + n).classList.add('active');
        }

        function tab(t) {
            document.getElementById('mainHero').classList.add('hidden');
            document.getElementById('vaultArea').classList.add('hidden');
            document.getElementById('adminPanel').classList.add('hidden');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active-nav'));

            if(t === 'home') { 
                document.getElementById('mainHero').classList.remove('hidden');
                document.getElementById('hTab').classList.add('active-nav');
            } else if(t === 'vault') {
                document.getElementById('vaultArea').classList.remove('hidden');
                document.getElementById('vTab').classList.add('active-nav');
                renderVault();
            }
        }

        function recVoice() {
            const b = document.getElementById('vBtn');
            b.classList.add('scale-110', 'border-red-500');
            setTimeout(() => {
                b.innerHTML = '<i class="fas fa-check text-green-500"></i>';
                alert("تم تسجيل البصمة الصوتية وتأمينها.");
            }, 5000);
        }

        function completeDoc() {
            const name = document.getElementById('wName').value || "عمل مجهول";
            const idNum = document.getElementById('idVal').value || "000";
            const doc = { name, date: new Date().toLocaleDateString(), cert: 'BP-' + idNum + '-' + Math.floor(Math.random()*999) };
            
            let vault = JSON.parse(localStorage.getItem('bp_v') || '[]');
            vault.push(doc);
            localStorage.setItem('bp_v', JSON.stringify(vault));
            
            alert("نجاح! تم زراعة العلامة المائية الرقمية وتوثيق العمل.");
            closeDrawer();
            tab('vault');
        }

        function renderVault() {
            const cont = document.getElementById('vaultContainer');
            const data = JSON.parse(localStorage.getItem('bp_v') || '[]');
            cont.innerHTML = data.length ? data.map(i => `
                <div class="bg-white/5 p-5 rounded-[2rem] flex justify-between items-center border-l-4 border-gold">
                    <div class="text-right">
                        <p class="font-bold text-sm">${i.name}</p>
                        <p class="text-[9px] text-gray-500">${i.date} | ID: ${i.cert}</p>
                    </div>
                    <i class="fas fa-shield-check gold-text"></i>
                </div>
            `).join('') : '<p class="text-gray-600 mt-20 text-center">لا توجد أعمال موثقة</p>';
        }
    </script>
</body>
</html>
